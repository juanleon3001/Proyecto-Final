-- SECUENCIAS
CREATE SEQUENCE CLIENTES_SEQ 
    START WITH 1
    INCREMENT BY 1
    NOCACHE
    NOCYCLE;

CREATE SEQUENCE PRODUCTOS_SEQ 
    START WITH 1
    INCREMENT BY 1
    NOCACHE
    NOCYCLE;

CREATE SEQUENCE ESTADOS_SEQ 
    START WITH 1
    INCREMENT BY 1
    NOCACHE
    NOCYCLE;

CREATE SEQUENCE PEDIDOS_SEQ 
    START WITH 1
    INCREMENT BY 1
    NOCACHE
    NOCYCLE;

-- CLIENTES
CREATE TABLE CLIENTES (
    ID_CLIENTE NUMBER DEFAULT CLIENTES_SEQ.NEXTVAL,
    NOMBRE VARCHAR2(50) NOT NULL,
    APELLIDO VARCHAR2(50) NOT NULL,
    EMAIL VARCHAR2(100) NOT NULL UNIQUE,
    TELEFONO CHAR(10) NOT NULL UNIQUE,
    DIRECCION VARCHAR2(100),
    CONSTRAINT CLIENTES_PK PRIMARY KEY (ID_CLIENTE)
);

-- PRODUCTOS
CREATE TABLE PRODUCTOS (
    ID_PRODUCTO NUMBER DEFAULT PRODUCTOS_SEQ.NEXTVAL,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION CLOB NOT NULL,
    PRECIO NUMBER(10, 2) NOT NULL CHECK (PRECIO >= 0),
    STOCK NUMBER NOT NULL CHECK (STOCK >= 0),
    CONSTRAINT PRODUCTOS_PK PRIMARY KEY (ID_PRODUCTO)
);

-- ESTADOS
CREATE TABLE ESTADOS (
    ID_ESTADO NUMBER DEFAULT ESTADOS_SEQ.NEXTVAL,
    NOMBRE VARCHAR2(20) NOT NULL UNIQUE,
    CONSTRAINT ESTADOS_PK PRIMARY KEY (ID_ESTADO)
);

-- CARGA DE ESTADOS
INSERT INTO ESTADOS (ID_ESTADO, NOMBRE) VALUES (ESTADOS_SEQ.NEXTVAL, 'Pendiente');
INSERT INTO ESTADOS (ID_ESTADO, NOMBRE) VALUES (ESTADOS_SEQ.NEXTVAL, 'Enviado');
INSERT INTO ESTADOS (ID_ESTADO, NOMBRE) VALUES (ESTADOS_SEQ.NEXTVAL, 'Entregado');
INSERT INTO ESTADOS (ID_ESTADO, NOMBRE) VALUES (ESTADOS_SEQ.NEXTVAL, 'Cancelado');

-- PEDIDOS
CREATE TABLE PEDIDOS (
    ID_PEDIDO NUMBER DEFAULT PEDIDOS_SEQ.NEXTVAL,
    ID_CLIENTE NUMBER NOT NULL,
    TOTAL NUMBER(10,2) NOT NULL,
    FECHA_CREACION DATE NOT NULL,
    ID_ESTADO NUMBER NOT NULL,
    CONSTRAINT PEDIDOS_PK PRIMARY KEY (ID_PEDIDO),
    CONSTRAINT FK_CLIENTE_PEDIDO FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES(ID_CLIENTE),
    CONSTRAINT FK_ESTADO_PEDIDO FOREIGN KEY (ID_ESTADO) REFERENCES ESTADOS(ID_ESTADO)
);


-- PEDIDO_PRODUCTO (relación muchos a muchos)
CREATE TABLE PEDIDO_PRODUCTO (
    ID_PEDIDO NUMBER NOT NULL,
    ID_PRODUCTO NUMBER NOT NULL,
    CANTIDAD NUMBER NOT NULL CHECK (CANTIDAD > 0),
    CONSTRAINT PEDIDO_PRODUCTO_PK PRIMARY KEY (ID_PEDIDO, ID_PRODUCTO),
    CONSTRAINT FK_PEDIDO_PP FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS(ID_PEDIDO),
    CONSTRAINT FK_PRODUCTO_PP FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO)
);


-- CREACION DE REGGISTROS
--CLIENTES
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Juan', 'Pérez', 'juan.perez@example.com', '5551234567', 'Calle 1, Ciudad A');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('María', 'Gómez', 'maria.gomez@example.com', '5559876543', 'Calle 2, Ciudad B');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Carlos', 'Ramírez', 'carlos.ramirez@example.com', '5555678910', 'Calle 3, Ciudad C');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Ana', 'López', 'ana.lopez@example.com', '5556781234', 'Calle 4, Ciudad D');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Luis', 'Fernández', 'luis.fernandez@example.com', '5554321098', 'Calle 5, Ciudad E');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Laura', 'Torres', 'laura.torres@example.com', '5553214567', 'Calle 6, Ciudad F');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Pedro', 'Martínez', 'pedro.martinez@example.com', '5557890123', 'Calle 7, Ciudad G');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Sofía', 'Hernández', 'sofia.hernandez@example.com', '5556547890', 'Calle 8, Ciudad H');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Diego', 'Castro', 'diego.castro@example.com', '5558901234', 'Calle 9, Ciudad I');
INSERT INTO CLIENTES (NOMBRE, APELLIDO, EMAIL, TELEFONO, DIRECCION) VALUES ('Valeria', 'Mendoza', 'valeria.mendoza@example.com', '5554567890', 'Calle 10, Ciudad J');
--PRODUCTOS
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Laptop Dell', 'Laptop con procesador Intel i7, 16GB RAM', 18000.00, 20);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Teclado Mecánico', 'Teclado RGB con switches azules', 1200.00, 50);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Mouse Gamer', 'Mouse con 6 botones programables', 800.00, 60);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Monitor 24"', 'Monitor Full HD 24 pulgadas', 3500.00, 30);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Silla Ergonómica', 'Silla con soporte lumbar y reclinable', 4200.00, 15);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Disco Duro Externo 1TB', 'USB 3.0 portátil', 1400.00, 40);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Memoria USB 64GB', 'USB 3.0 alta velocidad', 300.00, 80);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Audífonos Bluetooth', 'Cancelación de ruido', 1100.00, 25);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Impresora Multifuncional', 'Escáner, copia y wifi', 2800.00, 10);
INSERT INTO PRODUCTOS (NOMBRE, DESCRIPCION, PRECIO, STOCK) VALUES ('Router Wifi 6', 'Router de alta velocidad', 1600.00, 35);
--PEDIDOS
INSERT INTO PEDIDOS (ID_CLIENTE, TOTAL, FECHA_CREACION, ID_ESTADO) VALUES (21, 18500.00, TO_DATE('2024-05-01', 'YYYY-MM-DD'), 1);
INSERT INTO PEDIDOS (ID_CLIENTE, TOTAL, FECHA_CREACION, ID_ESTADO) VALUES (22, 2300.00, TO_DATE('2024-05-02', 'YYYY-MM-DD'), 2);
INSERT INTO PEDIDOS (ID_CLIENTE, TOTAL, FECHA_CREACION, ID_ESTADO) VALUES (23, 4200.00, TO_DATE('2024-05-03', 'YYYY-MM-DD'), 3);
INSERT INTO PEDIDOS (ID_CLIENTE, TOTAL, FECHA_CREACION, ID_ESTADO) VALUES (24, 1100.00, TO_DATE('2024-05-04', 'YYYY-MM-DD'), 4);
INSERT INTO PEDIDOS (ID_CLIENTE, TOTAL, FECHA_CREACION, ID_ESTADO) VALUES (25, 4700.00, TO_DATE('2024-05-05', 'YYYY-MM-DD'), 1);
--PEDIDO PRODUCTO
-- Pedido 1
INSERT INTO PEDIDO_PRODUCTO (ID_PEDIDO, ID_PRODUCTO, CANTIDAD) VALUES (61, 21, 1); -- Laptop
INSERT INTO PEDIDO_PRODUCTO (ID_PEDIDO, ID_PRODUCTO, CANTIDAD) VALUES (61, 27, 1); -- USB

-- Pedido 2
INSERT INTO PEDIDO_PRODUCTO (ID_PEDIDO, ID_PRODUCTO, CANTIDAD) VALUES (62, 22, 1); -- Teclado
INSERT INTO PEDIDO_PRODUCTO (ID_PEDIDO, ID_PRODUCTO, CANTIDAD) VALUES (62, 23, 1); -- Mouse

-- Pedido 3
INSERT INTO PEDIDO_PRODUCTO (ID_PEDIDO, ID_PRODUCTO, CANTIDAD) VALUES (63, 25, 1); -- Silla

-- Pedido 4
INSERT INTO PEDIDO_PRODUCTO (ID_PEDIDO, ID_PRODUCTO, CANTIDAD) VALUES (64, 28, 1); -- Audífonos

-- Pedido 5
INSERT INTO PEDIDO_PRODUCTO (ID_PEDIDO, ID_PRODUCTO, CANTIDAD) VALUES (65, 24, 1); -- Monitor
INSERT INTO PEDIDO_PRODUCTO (ID_PEDIDO, ID_PRODUCTO, CANTIDAD) VALUES (65, 26, 1); -- Disco Duro